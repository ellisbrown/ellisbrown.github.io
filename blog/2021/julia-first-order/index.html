<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Open-source Julia packages for first-order optimization | Ellis Brown </title> <meta name="author" content="Ellis L. Brown II"> <meta name="description" content="We present two Julia packages that the BlackRock AI Labs has released, PiecewiseQuadratics.jl and SeparableOptimization.jl, along with a new Julia organization we created that is dedicated to first-order optimization methods."> <meta name="keywords" content="self-supervised learning, representation learning, multimodal, vision-language, generalization, curiosity, deep learning, computer vision, machine learning, artificial intelligence"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%B4&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ellisbrown.github.io//blog/2021/julia-first-order/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Ellis Brown </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/research/">research </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Open-source Julia packages for first-order optimization</h1> <p class="post-meta"> Created on July 31, 2021 </p> <p class="post-tags"> <a href="/blog/2021"> <i class="fa-solid fa-calendar fa-sm"></i> 2021 </a>   ·   <a href="/blog/tag/julia"> <i class="fa-solid fa-hashtag fa-sm"></i> julia</a>   <a href="/blog/tag/open-source"> <i class="fa-solid fa-hashtag fa-sm"></i> open-source</a>   <a href="/blog/tag/optimization"> <i class="fa-solid fa-hashtag fa-sm"></i> optimization</a>   ·   <a href="/blog/category/optimization"> <i class="fa-solid fa-tag fa-sm"></i> optimization</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote> <p><em>This was originally posted <a href="https://medium.com/blackrock-engineering/open-source-julia-packages-for-first-order-optimization-ac51f0f1aa09" rel="external nofollow noopener" target="_blank">here</a> on BlackRock’s engineering blog.</em></p> </blockquote> <p>In this post, we present two Julia packages that the BlackRock AI Labs has released, <a href="https://github.com/JuliaFirstOrder/PiecewiseQuadratics.jl" rel="external nofollow noopener" target="_blank">PiecewiseQuadratics.jl</a> and <a href="https://github.com/JuliaFirstOrder/SeparableOptimization.jl" rel="external nofollow noopener" target="_blank">SeparableOptimization.jl</a>, along with a new Julia organization we created that is dedicated to first-order optimization methods. We originally developed these packages and the corresponding methodology to solve a class of portfolio construction problems, which we detail in a <a href="https://arxiv.org/abs/2103.05455" rel="external nofollow noopener" target="_blank">paper</a> published in March. We will feature this work in a talk at the <a href="https://juliacon.org/2021/" rel="external nofollow noopener" target="_blank">JuliaCon 2021</a> <a href="https://jump.dev/meetings/juliacon2021/" rel="external nofollow noopener" target="_blank">JuMP-dev workshop</a> later this month!</p> <p><em>See also: another implementation of these packages in Rust, as described in <a href="https://medium.com/blackrock-engineering/writing-an-optimization-library-in-rust-588628c0e500" rel="external nofollow noopener" target="_blank">this blog post</a>.</em></p> <h2 id="why-julia">Why Julia?</h2> <p>After devising the ADMM based optimization methodology described in the <a href="https://arxiv.org/abs/2103.05455" rel="external nofollow noopener" target="_blank">paper</a>, there was no question what language we would use to implement it. Julia’s unparalleled combination of an elegant and expressive high-level syntax with C/Fortran level speed allowed us to quickly translate our formulations into efficient code. We are excited to share it with the growing Julia optimization community!</p> <h2 id="piecewisequadraticsjl"><a href="https://github.com/JuliaFirstOrder/PiecewiseQuadratics.jl" rel="external nofollow noopener" target="_blank">PiecewiseQuadratics.jl</a></h2> <p>This package allows for the representation and manipulation of univariate piecewise quadratic functions, designed to be used as a cost function in optimization packages. Piecewise quadratic functions are composed of several equations (“pieces”), each of which takes the standard quadratic form and applies to a different part of the domain. Consider the following example:</p> \[f(x) = \left\{\begin{array}{ll} x^2 - 3x - 3 &amp; \text{if } x \in [-\infty, 3]\\ x + 3 &amp; \text{if } x \in [3, 4]\\ 2x^2 - 20x + 47 &amp; \text{if } x \in [4, 6]\\ x - 7 &amp; \text{if } x \in [6, 7.5]\\ 4x - 29 &amp; \text{if } x \in [7.5, \infty]\\ \end{array}\right.\] <p>Within <a href="https://github.com/JuliaFirstOrder/PiecewiseQuadratics.jl" rel="external nofollow noopener" target="_blank">PiecewiseQuadratics.jl</a>, we would represent <code class="language-plaintext highlighter-rouge">f</code> as a <code class="language-plaintext highlighter-rouge">PiecewiseQuadratic</code>, which is simply a list of <code class="language-plaintext highlighter-rouge">BoundedQuadratics</code>. Here, each <code class="language-plaintext highlighter-rouge">BoundedQuadratic</code> represents our quadratic equation “pieces,” and is defined by the equation’s <code class="language-plaintext highlighter-rouge">p</code>, <code class="language-plaintext highlighter-rouge">q</code>, and <code class="language-plaintext highlighter-rouge">r</code> terms along with the <code class="language-plaintext highlighter-rouge">Interval</code> it applies to (represented by <code class="language-plaintext highlighter-rouge">[lb, ub]</code>). Altogether, we represent f with the following code:</p> <div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="n">PiecewiseQuadratic</span><span class="x">([</span>
    <span class="c"># BoundedQuadratic(lb, ub, p, q, r),</span>
    <span class="n">BoundedQuadratic</span><span class="x">(</span><span class="o">-</span><span class="nb">Inf</span><span class="x">,</span> <span class="mf">3.0</span><span class="x">,</span> <span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="x">,</span> <span class="mf">3.0</span><span class="x">),</span>
    <span class="n">BoundedQuadratic</span><span class="x">(</span><span class="mf">3.0</span><span class="x">,</span> <span class="mf">4.0</span><span class="x">,</span> <span class="mf">0.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="x">,</span> <span class="mf">3.0</span><span class="x">),</span>
    <span class="n">BoundedQuadratic</span><span class="x">(</span><span class="mf">4.0</span><span class="x">,</span> <span class="mf">6.0</span><span class="x">,</span> <span class="mf">2.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">20.0</span><span class="x">,</span> <span class="mf">47.0</span><span class="x">),</span>
    <span class="n">BoundedQuadratic</span><span class="x">(</span><span class="mf">6.0</span><span class="x">,</span> <span class="mf">7.5</span><span class="x">,</span> <span class="mf">0.0</span><span class="x">,</span> <span class="mf">1.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">7.0</span><span class="x">),</span>
    <span class="n">BoundedQuadratic</span><span class="x">(</span><span class="mf">7.5</span><span class="x">,</span> <span class="nb">Inf</span><span class="x">,</span> <span class="mf">0.0</span><span class="x">,</span> <span class="mf">4.0</span><span class="x">,</span> <span class="o">-</span><span class="mf">29.0</span><span class="x">)</span>
<span class="x">])</span>
</code></pre></div></div> <p><strong><em>Note:</em></strong> <em>although this function is complete over the domain, this is not a requirement! Functions default to <code class="language-plaintext highlighter-rouge">Inf</code> when evaluated on undefined segments.</em></p> <p>We implement several methods that are useful for optimization — such as the <code class="language-plaintext highlighter-rouge">sum</code>, the <code class="language-plaintext highlighter-rouge">derivative</code>, the convex <code class="language-plaintext highlighter-rouge">envelope</code>, and the <code class="language-plaintext highlighter-rouge">prox</code> operator — as well as several utility methods. Below we visualize the function <code class="language-plaintext highlighter-rouge">f</code> that we previously defined along with its convex envelope using <code class="language-plaintext highlighter-rouge">get_plot</code> (which allows interfacing with your favorite Julia plotting library) and <a href="http://juliaplots.org/" rel="external nofollow noopener" target="_blank">JuliaPlots</a>:</p> <div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">Plots</span>
<span class="n">plot</span><span class="x">(</span><span class="n">get_plot</span><span class="x">(</span><span class="n">f</span><span class="x">);</span> <span class="n">label</span><span class="o">=</span><span class="s">"piece-wise quadratic"</span><span class="x">,</span> <span class="n">grid</span><span class="o">=</span><span class="nb">false</span><span class="x">,</span> <span class="n">color</span><span class="o">=:</span><span class="n">black</span><span class="x">)</span>
<span class="n">plot!</span><span class="x">(</span><span class="n">get_plot</span><span class="x">(</span><span class="n">simplify</span><span class="x">(</span><span class="n">envelope</span><span class="x">(</span><span class="n">f</span><span class="x">)));</span> <span class="n">label</span><span class="o">=</span><span class="s">"envelope"</span><span class="x">,</span> <span class="n">linestyle</span><span class="o">=:</span><span class="n">dash</span><span class="x">,</span> <span class="n">color</span><span class="o">=:</span><span class="n">blue</span><span class="x">,</span> <span class="n">la</span><span class="o">=</span><span class="mf">0.5</span><span class="x">)</span>
</code></pre></div></div> <p><img src="/assets/posts/julia/pwq.png" alt=""></p> <p>See the <a href="https://juliafirstorder.github.io/PiecewiseQuadratics.jl/stable/" rel="external nofollow noopener" target="_blank">PiecewiseQuadratics.jl documentation</a> for details and more examples of the package!</p> <h2 id="separableoptimizationjl">SeparableOptimization.jl</h2> <p>This package uses a derivative of <a href="https://stanford.edu/~boyd/admm.html" rel="external nofollow noopener" target="_blank">ADMM</a> to solve Linearly Constrained Separable Optimization (LCSO) problems. LCSO problems have cost functions that are separable over the decision variable and have linear constraints. In our portfolio construction example, the decision variable is a vector, where the entries are the percent of our total portfolio value in each of assets; we require that these values sum to (a linear constraint) and add in cost functions that are specific to each asset (they separate over our decision variable). These costs could be anything from a cost to hold each asset (e.g., the cost to short TSLA is higher than for MSFT), to position limits per asset (e.g., requiring 10–20% of our portfolio value is in BTC), to combinations of various other costs. Often these functions are very complicated — we represent them using <a href="https://github.com/JuliaFirstOrder/PiecewiseQuadratics.jl" rel="external nofollow noopener" target="_blank">PiecewiseQuadratics.jl</a>!</p> <p>LCSO problems are a very general formulation and have wide application beyond portfolio optimization. Other applications might include radiation treatment planning — where we optimize the radiation intensity pattern for cancer treatment — or dynamic energy management — where we optimize the power usage of a network of devices over time.</p> <p>See the <a href="https://arxiv.org/abs/2103.05455" rel="external nofollow noopener" target="_blank">paper</a> for more information on LCSO problems and our portfolio construction example, and the <a href="https://juliafirstorder.github.io/SeparableOptimization.jl/dev/" rel="external nofollow noopener" target="_blank">SeparableOptimization.jl documentation</a> for details and examples of the package!</p> <h2 id="a-new-julia-organization">A new Julia organization</h2> <p>In the process of open sourcing these packages, we thought a lot about how to maximize their impact and usage. Julia’s open-source community often organizes around <a href="https://julialang.org/community/organizations/" rel="external nofollow noopener" target="_blank">GitHub Organizations</a>.</p> <blockquote> <p>“This allows for a higher degree of collaboration and structure that ultimately enables each of these communities to be self-sustaining.”</p> </blockquote> <p>Rather than hosting these packages on <a href="https://github.com/blackrock/" rel="external nofollow noopener" target="_blank">BlackRock’s GitHub</a>, we wanted to find an organization to host them alongside other related packages that would be of mutual benefit. After discussion with various organizations, we realized that there were a few related packages out there, but no organization dedicated to first-order optimization methods. So, we decided to create <a href="https://github.com/JuliaFirstOrder" rel="external nofollow noopener" target="_blank">JuliaFirstOrder</a>. We currently have five packages and are actively working to cultivate the community. A special thank you to <a href="https://mlubin.github.io/" rel="external nofollow noopener" target="_blank">Miles Lubin</a> for sparking the idea and making the right introductions!</p> <h2 id="conclusions">Conclusions</h2> <p>We are very excited to get these new packages into the hands of the Julia community, and to grow our new organization. Head to their documentation pages to learn more and how to give them a try. Don’t forget to tune into our <a href="https://youtu.be/9iXWtqm60sQ?si=APdRf8lwlpAPf6-x" rel="external nofollow noopener" target="_blank">presentation at JuliaCon 2021</a> titled “Linearly Constrained Separable Optimization!”</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Ellis L. Brown II. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Last updated: May 13, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script src="/assets/js/tooltips-setup.js?53023e960fbc64cccb90d32e9363de2b"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-00N9EWF2WT"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-00N9EWF2WT');
  </script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>